<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />

  <!-- –û—Å—Ç–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–º: —Ç–æ–≥–¥–∞ API = —Ç–µ–∫—É—â–∏–π –¥–æ–º–µ–Ω (—Ç–æ—Ç –∂–µ, –≥–¥–µ /app/) -->
  <meta name="api-base" content="" />

  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" />
  <title>ReviewCash</title>

  <!-- FIX: —á—Ç–æ–±—ã –±—Ä–∞—É–∑–µ—Ä –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª /favicon.ico -->
  <link rel="icon" href="data:,">

  <script>
    (function () {
      function box() { return document.getElementById("global-error-box"); }
      function hideLoader() { try { if (window.__rcHideLoader) return window.__rcHideLoader(); } catch(e){} var l = document.getElementById("loader"); if (l) l.style.display = "none"; }

      window.__showError = function (msg, err) {
        try {
          var b = box();
          if (b) {
            b.style.display = "block";
            b.textContent = String(msg) + (err ? ("\n\n" + (err.stack || err.message || String(err))) : "");
          }
        } catch (e) {}
        hideLoader();
        try { console.error(msg, err); } catch (e2) {}
      };

      window.addEventListener("error", function (event) {
        var t = event && event.target;
        var tag = t && t.tagName ? String(t.tagName).toUpperCase() : "";
        var url = t && (t.src || t.href);

        // FIX: –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—Ä–∞—Å–Ω—É—é –ø–ª–∞—à–∫—É –∏–∑-–∑–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫/—à—Ä–∏—Ñ—Ç–æ–≤/—Ñ–∞–≤–∏–∫–æ–Ω–∞
        if (url) {
          var u = String(url);
          if (tag === "IMG") return;
          if (/fonts\.googleapis\.com|fonts\.gstatic\.com/i.test(u)) return;
          if (/\/favicon\.ico(\?|$)/i.test(u)) return;
          return window.__showError("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ—Å—É—Ä—Å: " + u);
        }

        window.__showError("–û—à–∏–±–∫–∞: " + (event.message || "Unknown error"), event.error);
      }, true);

      window.addEventListener("unhandledrejection", function (event) {
        window.__showError("Unhandled Promise rejection: " + (event.reason?.message || String(event.reason)), event.reason);
      });
    })();
  </script>

  <script src="https://telegram.org/js/telegram-web-app.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">

  <style>
    /* Pages: smooth transitions + no black screen */
    .app-container section.hidden { display:none !important; }
    .app-container section.anim-entry {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity .22s ease, transform .22s ease;
      will-change: opacity, transform;
    }
    .app-container section.anim-entry.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* SVG icons (tasks + bottom nav) */
    .rc-icon { display:flex; align-items:center; justify-content:center; }
    .rc-icon svg { width: 1.15em; height: 1.15em; }
    .nav-ico { display:inline-flex; width:18px; height:18px; margin-right:8px; vertical-align:-3px; }
    .nav-ico svg { width:18px; height:18px; }

    /* Icon colors (fix: currentColor can be transparent if text uses gradient) */
    :root{
      --rc-ico-off: rgba(255,255,255,0.70);
      --rc-ico-on: var(--accent-cyan, #00eaff);
      --rc-ico-ya: var(--accent-gold, #ffcc00);
      --rc-ico-gm: var(--accent-green, #3cff97);
    }
    .nav-ico svg{ stroke: var(--rc-ico-off) !important; }
    .nav-item.active .nav-ico svg{ stroke: var(--rc-ico-on) !important; }
    .brand-box.rc-icon svg{ stroke: var(--rc-ico-on) !important; }
    .brand-box.rc-icon[data-tt="ya"] svg{ stroke: var(--rc-ico-ya) !important; }
    .brand-box.rc-icon[data-tt="gm"] svg{ stroke: var(--rc-ico-gm) !important; }
    .rc-icon[data-tt="ya"] svg{ stroke: var(--rc-ico-ya) !important; }
    .rc-icon[data-tt="gm"] svg{ stroke: var(--rc-ico-gm) !important; }
    .rc-icon[data-tt="tg"] svg{ stroke: var(--rc-ico-on) !important; }

    /* Beautiful entry loader */
    .rc-loader-overlay{
      position:fixed; inset:0;
      z-index:99997;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      background:
        radial-gradient(900px 420px at 50% 20%, rgba(0,234,255,0.16), rgba(0,0,0,0) 55%),
        radial-gradient(700px 380px at 10% 90%, rgba(60,255,151,0.10), rgba(0,0,0,0) 55%),
        rgba(6, 7, 11, 0.96);
      backdrop-filter: blur(14px);
      transition: opacity .22s ease, transform .22s ease;
      opacity:1;
      transform: translateY(0);
    }
    .rc-loader-overlay.hide{ opacity:0; transform: translateY(-6px); }
    .rc-loader-card{
      width:min(420px, 92vw);
      border-radius:28px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(18, 20, 28, 0.78);
      box-shadow: 0 18px 70px rgba(0,0,0,0.50);
      overflow:hidden;
    }
    .rc-loader-top{ display:flex; align-items:center; gap:16px; padding:20px 20px 14px; }
    .rc-loader-logo{
      width:64px; height:64px;
      border-radius:22px;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,234,255,0.08);
      border:1px solid rgba(0,234,255,0.20);
      overflow:hidden;
    }
    .rc-loader-logo:before{
      content:"";
      position:absolute; inset:-30%;
      background: conic-gradient(from 0deg, rgba(0,234,255,0) 0 12%, rgba(0,234,255,0.95) 18%, rgba(60,255,151,0.85) 28%, rgba(0,234,255,0) 45%);
      animation: rcSpin 1.35s linear infinite;
      opacity:.9;
    }
    .rc-loader-logo:after{
      content:"";
      position:absolute; inset:6px;
      background: rgba(18, 20, 28, 0.92);
      border-radius:18px;
      border:1px solid rgba(255,255,255,0.10);
    }
    .rc-loader-mark{ position:relative; z-index:1; font-weight:1000; letter-spacing:0.5px; font-size:20px; color: var(--accent-cyan, #00eaff); }
    .rc-loader-title{ font-weight:1000; font-size:18px; line-height:1.1; }
    .rc-loader-sub{ font-size:12px; color: var(--text-dim, rgba(255,255,255,0.65)); margin-top:4px; line-height:1.35; }
    .rc-loader-bars{ padding: 10px 20px 20px; display:flex; flex-direction:column; gap:10px; }
    .rc-skel{ height:12px; border-radius:12px; background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.06); position:relative; overflow:hidden; }
    .rc-skel:before{ content:""; position:absolute; inset:0; transform: translateX(-60%); background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.12) 45%, rgba(255,255,255,0) 100%); animation: rcShimmer 1.1s ease-in-out infinite; }
    .rc-skel.w1{ width: 78%; }
    .rc-skel.w2{ width: 62%; }
    .rc-skel.w3{ width: 86%; }
    .rc-loader-dots{ display:flex; gap:6px; align-items:center; padding: 0 20px 18px; color: rgba(255,255,255,0.55); font-size:12px; }
    .rc-dot{ width:6px; height:6px; border-radius:50%; background: rgba(255,255,255,0.35); animation: rcPulse 1.0s ease-in-out infinite; }
    .rc-dot:nth-child(2){ animation-delay:.12s; }
    .rc-dot:nth-child(3){ animation-delay:.24s; }
    @keyframes rcSpin{ to{ transform: rotate(360deg); } }
    @keyframes rcShimmer{ 0%{ transform: translateX(-60%);} 100%{ transform: translateX(60%);} }
    @keyframes rcPulse{ 0%,100%{ transform: translateY(0); opacity:.45;} 50%{ transform: translateY(-2px); opacity:.95;} }


    /* Pretty toasts (instead of ugly system popups) */
    .toast-root {
      position: fixed;
      top: 12px;
      left: 12px;
      right: 12px;
      z-index: 99998;
      display: flex;
      flex-direction: column;
      gap: 10px;
      pointer-events: none;
    }
    .toast {
      pointer-events: auto;
      display: flex;
      gap: 12px;
      align-items: flex-start;
      padding: 12px 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(18, 20, 28, 0.92);
      backdrop-filter: blur(12px);
      box-shadow: 0 12px 34px rgba(0,0,0,0.35);
      opacity: 0;
      transform: translateY(-8px);
      transition: opacity .18s ease, transform .18s ease;
    }
    .toast.show { opacity: 1; transform: translateY(0); }
    .toast-ico {
      flex: 0 0 34px;
      width: 34px;
      height: 34px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 1px;
    }
    .toast.info .toast-ico { background: rgba(0, 234, 255, 0.14); color: var(--accent-cyan); }
    .toast.success .toast-ico { background: rgba(60, 255, 151, 0.14); color: var(--accent-green); }
    .toast.error .toast-ico { background: rgba(255, 77, 79, 0.14); color: #ff4d4f; }

    .toast-body { flex: 1; min-width: 0; }
    .toast-title { font-weight: 900; font-size: 13px; line-height: 1.15; }
    .toast-msg { margin-top: 2px; font-size: 12px; color: var(--text-dim); line-height: 1.35; word-break: break-word; }
    .toast-close {
      flex: 0 0 auto;
      opacity: 0.45;
      cursor: pointer;
      user-select: none;
      margin-left: 6px;
      padding: 2px 6px;
      border-radius: 10px;
    }
    .toast-close:active { opacity: 0.8; }
  </style>

</head>

<body>
  <div id="global-error-box" style="display:none; position:fixed; top:0; left:0; right:0; background:rgba(255,0,0,0.92); color:#fff; padding:12px 14px; font-size:12px; z-index:99999; white-space:pre-wrap; word-break:break-word;"></div>

  
  <div id="loader" class="rc-loader-overlay">
    <div class="rc-loader-card">
      <div class="rc-loader-top">
        <div class="rc-loader-logo" aria-hidden="true"><div class="rc-loader-mark">RC</div></div>
        <div style="min-width:0;">
          <div class="rc-loader-title">ReviewCash</div>
          <div id="loader-sub" class="rc-loader-sub">–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è‚Ä¶</div>
        </div>
      </div>
      <div class="rc-loader-bars" aria-hidden="true">
        <div class="rc-skel w3"></div>
        <div class="rc-skel w1"></div>
        <div class="rc-skel w2"></div>
      </div>
      <div class="rc-loader-dots" aria-hidden="true">
        <span class="rc-dot"></span><span class="rc-dot"></span><span class="rc-dot"></span>
        <span style="margin-left:8px; opacity:.8;">–ó–∞–≥—Ä—É–∑–∫–∞</span>
      </div>
    </div>
  </div>

<div style="margin-top: 20px; font-weight: 800;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  </div>

  <div id="toast-root" class="toast-root"></div>

  <div class="app-container">

    <!-- TASKS VIEW -->
    <section id="view-tasks" class="anim-entry active">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:25px;">
        <div>
          <div style="display:flex; align-items:center; gap:10px; margin-bottom:5px;" onclick="showTab('profile')">
            <!-- FIX: src –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º, –∏–Ω–∞—á–µ –±—Ä–∞—É–∑–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å /app/ –∫–∞–∫ –∫–∞—Ä—Ç–∏–Ω–∫—É -->
            <img id="header-avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" style="width:32px; height:32px; border-radius:50%; background:#333; object-fit:cover;" alt="Avatar">
            <span id="header-name" style="font-weight:800; font-size:14px;">...</span>
          </div>
          <h2 style="font-size:28px; font-weight:900; margin:0;">–ó–∞–¥–∞–Ω–∏—è</h2>
        </div>
        <div style="display:flex; background: var(--glass); padding:4px; border-radius:16px; border:1px solid var(--glass-border); align-self:flex-end;">
          <div class="nav-item active" style="padding:8px 18px; font-size:12px;" onclick="setFilter('all')" id="f-all">–í—Å–µ</div>
          <div class="nav-item" style="padding:8px 18px; font-size:12px;" onclick="setFilter('my')" id="f-my">–ú–æ–∏</div>
        </div>
      </div>

      <div id="tasks-list"></div>
    </section>

    <!-- FRIENDS -->
    <section id="view-friends" class="hidden anim-entry">
      <h2 style="font-size:28px; font-weight:900; margin-bottom:25px;">–î—Ä—É–∑—å—è</h2>

      <div class="card" style="text-align:center;">
        <div style="font-size:48px; margin-bottom:10px;">üéÅ</div>
        <h3 style="margin:0 0 10px;">–ü—Ä–∏–≥–ª–∞—à–∞–π –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π</h3>
        <p style="color:var(--text-dim); font-size:14px; margin-bottom:20px;">–°—Å—ã–ª–∫–∞ –Ω–∏–∂–µ:</p>

        <div class="copy-box" onclick="copyInviteLink()" style="margin-bottom:15px;">
          <span id="invite-link" style="font-size:13px; color:var(--accent-cyan); overflow:hidden; text-overflow:ellipsis;">t.me/ReviewCashBot?start=...</span>
          <span>üîó</span>
        </div>
        <button class="btn btn-main" style="width:100%;" onclick="shareInvite()">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</button>
      </div>

      <div style="display:flex; gap:15px; margin-bottom:25px;">
        <div class="card" style="flex:1; margin:0; padding:15px; text-align:center;">
          <div style="font-size:24px; font-weight:900; color:var(--accent-green);" id="ref-count">0</div>
          <div style="font-size:12px; color:var(--text-dim);">–î—Ä—É–∑–µ–π</div>
        </div>
        <div class="card" style="flex:1; margin:0; padding:15px; text-align:center;">
          <div style="font-size:24px; font-weight:900; color:var(--accent-gold);" id="ref-earn">0 ‚ÇΩ</div>
          <div style="font-size:12px; color:var(--text-dim);">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
        </div>
      </div>
    </section>

    <!-- PROFILE -->
    <section id="view-profile" class="hidden anim-entry">
      <div class="card">
        <div class="profile-header">
          <div class="avatar-ring">
            <img class="avatar-img" id="u-pic" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" alt="Avatar">
            <div class="level-badge" id="u-lvl-badge">LVL 1</div>
          </div>
          <div class="balance-stack">
            <div id="u-name" style="color:var(--text-dim); font-size:14px; font-weight:800;">...</div>
            <div id="u-bal-rub" class="bal-rub">0 ‚ÇΩ</div>
            <div id="u-bal-star" class="bal-star">0 ‚≠ê</div>
          </div>
        </div>

        <div class="xp-track"><div class="xp-fill" id="u-xp-fill"></div></div>
        <div class="xp-text"><span id="u-xp-cur">0 XP</span><span id="u-xp-next">100 XP</span></div>

        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:20px;">
          <button class="btn btn-main" onclick="openModal('m-topup')">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
          <button class="btn btn-secondary" onclick="openModal('m-withdraw')">–í—ã–≤–µ—Å—Ç–∏</button>
        </div>
      </div>

      <div class="card" style="padding:0; overflow:hidden;">
        <div class="menu-item" onclick="showHistory()" style="margin:0; border:none; background:transparent;">
          <div style="display:flex; align-items:center; gap:12px;">
            <span style="font-size:20px; background:rgba(0,234,255,0.1); width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:10px;">üìú</span>
            <span>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</span>
          </div>
          <span style="opacity:0.3;">‚Üí</span>
        </div>
      </div>

      <div id="admin-panel-card" class="card" style="display:none; padding:15px; border:1px dashed var(--accent-gold); background:rgba(255,204,0,0.05);">
        <div class="menu-item" onclick="openAdminPanel()" style="margin:0; background:transparent; border:none; padding:5px;">
          <span style="color: var(--accent-gold);">üõ°Ô∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</span>
          <span id="admin-badge" style="background:var(--accent-gold); color:#000; padding:2px 8px; border-radius:10px; font-size:12px; font-weight:900; opacity:0;">0</span>
        </div>
      </div>

      <div class="menu-item"
           onclick="(window.Telegram && Telegram.WebApp ? Telegram.WebApp.openTelegramLink('https://t.me/LolikMoney') : window.open('https://t.me/LolikMoney','_blank'))"
           style="justify-content:center; opacity:0.7; font-size:12px;">
        üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞
      </div>
    </section>

    <!-- HISTORY -->
    <section id="view-history" class="hidden anim-entry">
      <div style="display:flex; align-items:center; gap:10px; margin-bottom:20px;">
        <button class="btn btn-secondary" style="padding:10px;" onclick="closeHistory()">‚Üê</button>
        <h2 style="margin:0;">–ò—Å—Ç–æ—Ä–∏—è</h2>
      </div>
      <div id="history-list" class="card" style="padding:0; overflow:hidden;"></div>
    </section>

  </div>

  <!-- NAV -->
  <nav class="nav-bar">
    <div class="nav-item active" id="tab-tasks" onclick="showTab('tasks')">
      <span class="nav-ico" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 6h8"/>
          <path d="M9 10h8"/>
          <path d="M9 14h6"/>
          <path d="M7 4h12a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"/>
        </svg>
      </span>
      –ó–∞–¥–∞–Ω–∏—è
    </div>
    <div class="nav-item" id="tab-friends" onclick="showTab('friends')">
      <span class="nav-ico" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M16 11a4 4 0 1 0-8 0"/>
          <path d="M3 21a7 7 0 0 1 18 0"/>
          <path d="M20 8a3 3 0 0 1 0 6"/>
        </svg>
      </span>
      –î—Ä—É–∑—å—è
    </div>
    <div class="nav-item" id="tab-profile" onclick="showTab('profile')">
      <span class="nav-ico" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21a8 8 0 1 0-16 0"/>
          <path d="M12 13a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"/>
        </svg>
      </span>
      –ü—Ä–æ—Ñ–∏–ª—å
    </div>
  </nav>

  <!-- FAB -->
  <div class="fab-wrap" onclick="openModal('m-create')"><div class="fab-btn">+</div></div>

  <!-- CREATE MODAL -->
  <div id="m-create" class="overlay">
    <div class="modal">
      <h2 style="margin:0 0 5px;">–ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h2>
      <p style="color:var(--text-dim); font-size:14px; margin-bottom:15px;">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è</p>

      <label class="input-label">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</label>
      <select id="t-type" onchange="recalc()">
        <option value="tg">‚úàÔ∏è Telegram (–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)</option>
        <option value="ya" data-p="120">üìç –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã (120‚ÇΩ)</option>
        <option value="gm" data-p="75">üåç Google Maps (75‚ÇΩ)</option>
      </select>

      <div id="tg-subtype-wrapper" style="margin-top:10px;">
        <label class="input-label">–¢–∏–ø –∑–∞–¥–∞–Ω–∏—è Telegram</label>
        <select id="t-tg-subtype" onchange="recalc()"></select>
        <div style="font-size:11px; color:var(--text-dim); margin:5px 0 0 5px;" id="tg-subtype-desc">
          –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç ~50% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
        </div>
      </div>

      <div id="tg-options" class="hidden" style="margin-top:15px; background:rgba(0,234,255,0.05); padding:12px; border-radius:16px; border:1px dashed var(--glass-border);">
        <div style="font-size:12px; color:var(--text-dim); line-height:1.4;">
          <b>‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:</b><br>–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
        </div>
      </div>

      <label class="input-label">–°—Å—ã–ª–∫–∞ (–ö–∞–Ω–∞–ª/–ë–æ—Ç/–ü–æ—Å—Ç)</label>
      <input type="text" id="t-target" placeholder="https://t.me/..." style="margin-top:5px;">
      <div id="t-target-status" class="input-status"></div>

      <label class="input-label">–¢–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
      <textarea id="t-text" rows="2" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í—Å—Ç—É–ø–∏—Ç–µ –∏ –Ω–µ –æ—Ç–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å..." style="margin-top:5px;"></textarea>

      <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:15px;">
        <div>
          <label class="input-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
          <input type="number" id="t-qty" value="10" min="1" oninput="recalc()" style="margin-top:5px;">
        </div>
        <div>
          <label class="input-label">–í–∞–ª—é—Ç–∞</label>
          <select id="t-cur" onchange="recalc()" style="margin-top:5px;">
            <option value="rub">RUB (‚ÇΩ)</option>
            <option value="star">Stars (‚≠ê)</option>
          </select>
        </div>
      </div>

      <div class="total-badge">
        <div style="display:flex; flex-direction:column; gap:2px;">
          <span style="font-weight:800; opacity:0.7;">–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
          <span style="font-size:11px; color:var(--text-dim);">–í–∫–ª—é—á–∞—è –∫–æ–º–∏—Å—Å–∏—é —Å–µ—Ä–≤–∏—Å–∞</span>
        </div>
        <span id="t-total" style="font-size:24px; font-weight:900; color:var(--accent-cyan);">0 ‚ÇΩ</span>
      </div>

      <button class="btn btn-main" style="width:100%; margin-top:25px;" onclick="createTask()">–û–ø–ª–∞—Ç–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
    </div>
  </div>

  <!-- TASK DETAILS -->
  <div id="m-task-details" class="overlay">
    <div class="modal">
      <div style="display:flex; justify-content:space-between; align-items:flex-start;">
        <div>
          <div id="td-type-badge" class="status-badge st-pending" style="margin-bottom:5px; display:inline-block;">TASK</div>
          <h2 id="td-title" style="margin:0; font-size:20px;">–ó–∞–¥–∞–Ω–∏–µ</h2>
          <div id="td-reward" style="color:var(--accent-green); font-weight:900; font-size:24px; margin-top:5px;">+0 ‚ÇΩ</div>
        </div>
        <div id="td-icon" class="brand-box" style="width:60px; height:60px; font-size:30px;"></div>
      </div>

      <div class="detail-block">
        <label class="input-label">–¶–µ–ª–µ–≤–∞—è —Å—Å—ã–ª–∫–∞:</label>
        <div class="copy-box" onclick="copyLink()" style="margin-top:5px;">
          <span id="td-link" style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:85%; font-size:13px; color:var(--accent-cyan);">https://...</span>
          <span>üîó</span>
        </div>
        <a id="td-link-btn" href="#" target="_blank" class="btn btn-secondary" style="width:100%; margin-top:10px; padding:10px; font-size:13px;">‚ÜóÔ∏è –ü–µ—Ä–µ–π—Ç–∏ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</a>
      </div>

      <div class="detail-block">
        <label class="input-label">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</label>
        <div id="td-text" style="background:var(--glass); padding:15px; border-radius:15px; margin-top:5px; font-size:14px; line-height:1.4;">...</div>
      </div>

      <div id="td-proof-area" style="margin-top:25px; border-top:1px solid var(--glass-border); padding-top:20px;">
        <div id="proof-manual" class="hidden">
          <h3 style="margin:0 0 10px; font-size:16px;">üì∏ –û—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏</h3>
          <label class="input-label">–ò–º—è/–Ω–∏–∫ –≤ –æ—Ç–∑—ã–≤–µ (–∫–∞–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è)</label>
          <input type="text" id="p-username" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –Ø.–ö.">
          <label class="input-label">–°–∫—Ä–∏–Ω—à–æ—Ç –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</label>
          <div class="file-upload-btn" onclick="document.getElementById('p-file').click()">
            <span id="p-filename">üì∑ –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç</span>
          </div>
          <input type="file" id="p-file" accept="image/*" style="display:none" onchange="updateFileName(this)">
        </div>

        <div id="proof-auto" class="hidden">
          <div style="background:rgba(0,234,255,0.1); padding:15px; border-radius:15px; display:flex; gap:10px; align-items:center;">
            <div style="font-size:24px;">ü§ñ</div>
            <div style="font-size:13px; line-height:1.3;">
              <b>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</b><br>–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏.
            </div>
          </div>
        </div>
      </div>

      <button id="td-action-btn" class="btn btn-main" style="width:100%; margin-top:25px;">–î–µ–π—Å—Ç–≤–∏–µ</button>
    </div>
  </div>

  <!-- ADMIN -->
  <div id="m-admin" class="overlay">
    <div class="modal">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
        <h2 style="margin:0;">üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ü–∏—è</h2>
        <div style="opacity:0.5; font-size:20px; cursor:pointer;" onclick="closeModal()">‚úï</div>
      </div>

      <div class="admin-tabs">
        <div class="admin-tab active" onclick="switchAdminTab('proofs')" id="at-proofs">–û—Ç—á—ë—Ç—ã</div>
        <div class="admin-tab" onclick="switchAdminTab('withdrawals')" id="at-withdrawals">–í—ã–≤–æ–¥—ã</div>
        <div class="admin-tab" onclick="switchAdminTab('tbank')" id="at-tbank">T-Bank</div>
      </div>

      <div id="admin-view-proofs">
        <div id="admin-list" style="display:flex; flex-direction:column; gap:15px;"></div>
      </div>

      <div id="admin-view-withdrawals" class="hidden">
        <div id="admin-withdraw-list" style="display:flex; flex-direction:column; gap:15px;"></div>
      </div>

      <div id="admin-view-tbank" class="hidden">
        <div id="admin-tbank-list" style="display:flex; flex-direction:column; gap:15px;"></div>
      </div>
    </div>
  </div>

  <!-- TOPUP -->
  <div id="m-topup" class="overlay">
    <div class="modal">
      <h2 style="margin:0;">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>
      <p style="color:var(--text-dim); font-size:14px; margin-bottom:20px;">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: 300 ‚ÇΩ</p>
      <input type="number" id="sum-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É (–æ—Ç 300)">

      <div class="pay-opt" onclick="processPay('pay_stars')">
        <div class="pay-icon" style="background:#ffcc00; color:#000;">‚≠ê</div>
        <div style="flex:1;"><b>Telegram Stars</b><br><small style="color:var(--text-dim);">–ò–Ω–≤–æ–π—Å –≤ Telegram</small></div>
      </div>

      <div class="pay-opt" onclick="openTBankPay()">
        <div class="pay-icon" style="background:#ffdd2d; color:#000;">T</div>
        <div style="flex:1;"><b>–¢-–ë–∞–Ω–∫</b><br><small style="color:var(--text-dim);">P2P, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–º</small></div>
      </div>
    </div>
  </div>

  <!-- TBANK -->
  <div id="m-pay-tbank" class="overlay">
    <div class="modal">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 style="margin:0;">–û–ø–ª–∞—Ç–∞ –¢-–ë–∞–Ω–∫</h2>
        <div style="opacity:0.5; font-size:20px; cursor:pointer;" onclick="closeModal()">‚úï</div>
      </div>

      <div style="background:var(--glass); padding:15px; border-radius:15px; margin:15px 0; border:1px solid var(--glass-border); text-align:center;">
        <p style="margin:0 0 5px; font-size:12px; opacity:0.7;">–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ</p>
        <div id="tb-amount-display" style="font-size:28px; font-weight:900; color:var(--accent-cyan);">0 ‚ÇΩ</div>
      </div>

      <p style="font-size:13px; color:var(--text-dim); margin-bottom:8px;">1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è:</p>
      <div class="copy-box" onclick="copyCode()">
        <span id="tb-code" style="font-family:monospace; font-weight:900; font-size:18px; letter-spacing:1px;">CODE</span>
        <span style="font-size:14px; opacity:0.7;">üìã</span>
      </div>

      <p style="font-size:13px; color:var(--text-dim); margin:15px 0 8px;">2. –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –ø–æ —Å—Å—ã–ª–∫–µ, —É–∫–∞–∑–∞–≤ –∫–æ–¥ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</p>
      <a href="https://www.tinkoff.ru/rm/r_TfPtbPbddX.PiDdKULdka/kkRwB91205" target="_blank" class="btn btn-secondary" style="width:100%; text-decoration:none; margin-bottom:20px; justify-content:center;">üîó –û—Ç–∫—Ä—ã—Ç—å –¢-–ë–∞–Ω–∫</a>

      <p style="font-size:13px; color:var(--text-dim); margin-bottom:5px;">3. –í–∞—à–µ –∏–º—è (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è):</p>
      <input type="text" id="tb-sender" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω –ò." style="margin-top:0;">

      <button class="btn btn-main" style="width:100%; margin-top:20px;" onclick="confirmTBank()">–Ø –æ–ø–ª–∞—Ç–∏–ª</button>
    </div>
  </div>

  <!-- WITHDRAW -->
  <div id="m-withdraw" class="overlay">
    <div class="modal">
      <h2>–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h2>
      <input type="text" id="w-details" placeholder="–ö–∞—Ä—Ç–∞ –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞">
      <input type="number" id="w-amount" placeholder="–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞" style="margin-top:10px;">
      <button class="btn btn-main" style="width:100%; margin-top:20px;" onclick="requestWithdraw()">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>

      <div style="margin-top:30px;">
        <h3 style="font-size:16px;">–ú–æ–∏ –∑–∞—è–≤–∫–∏</h3>
        <div id="withdrawals-list" style="margin-top:10px; display:flex; flex-direction:column; gap:8px;"></div>
      </div>
    </div>
  </div>

  <script src="main.js?v=ui_20260217c" defer></script>
</body>
</html>
